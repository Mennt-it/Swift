@inherits Dynamicweb.Rendering.ViewModelTemplate<Dynamicweb.Frontend.GridRowViewModel>
@{
	int newsletterWidth = Pageview != null ? Dynamicweb.Core.Converter.ToInt32(Pageview.Page.Item["Width"]) : 660;
	string rowWidth = newsletterWidth + "px";
	string backgroundColor = Model.Item.GetString("BackgroundColor");
	string backgroundStyle = !string.IsNullOrEmpty(backgroundColor) ? $"background-color:{backgroundColor};" : "";
	bool isStretchRow = Model.Item.GetList("Width").SelectedValue.ToLower() == "stretch";
	bool hasSpacingBetweenRows = Model.Item.GetList("SpaceBetweenRows").SelectedValue.ToLower() != "none";
	int yMargin = hasSpacingBetweenRows ? 20 : 0;
}
<div style="@(isStretchRow ? backgroundStyle : "")">
	<div class="layout one-col stack" style="margin: 0 auto @(yMargin)px auto;max-width:@rowWidth;min-width: 320px; width: 320px;width: calc(28000% - 167400px);overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;">
		<div class="layout__inner" style="@(!isStretchRow ? backgroundStyle : "")border-collapse: collapse;display: table;width: 100%;">
			<!--[if (mso)|(IE)]>
				<table width="100%" cellpadding="0" cellspacing="0" role="presentation">
				<tr class="layout-full-width" style="@(isStretchRow ? backgroundStyle : "")">
				<td class="layout__edges">&nbsp;</td>
				<td style="width:@rowWidth" class="w560">
			<![endif]-->
			<div class="column">
				<table style="border-collapse: collapse;table-layout: fixed;" cellpadding="0" cellspacing="0" width="100%" role="presentation">
					<tbody>
						<tr>
							@Model.Column(1).Output()
						</tr>
					</tbody>
				</table>
			</div>			
			<!--[if (mso)|(IE)]>
				</td>
				<td class="layout__edges">&nbsp;</td>
				</tr>
				</table>
			<![endif]-->
		</div>
	</div>
</div>
@if (hasSpacingBetweenRows)
{
	<!--[if (mso)]>
		<div class="layout one-col fixed-width stack">
			<table align="center" cellpadding="0" cellspacing="0" role="presentation">
				<tr class="layout-fixed-width">
					<td>
						<div class="column" style="line-height: 21px;">
							<div style="mso-line-height-rule: exactly;line-height: 20px;font-size: 1px;">&nbsp;</div>
						</div>
					</td>
				</tr>
			</table>
		</div>
	<![endif]-->
}
