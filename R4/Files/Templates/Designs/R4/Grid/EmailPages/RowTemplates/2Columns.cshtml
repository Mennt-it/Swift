@inherits Dynamicweb.Rendering.ViewModelTemplate<Dynamicweb.Frontend.GridRowViewModel>
@{
	int newsletterWidth = Pageview != null ? Dynamicweb.Core.Converter.ToInt32(Pageview.Page.Item["Width"]) : 660;
	string backgroundColor = Model.Item.GetString("BackgroundColor");
	string backgroundStyle = !string.IsNullOrEmpty(backgroundColor) ? $"background-color:{backgroundColor};" : "";
	bool isStretchRow = Model.Item.GetList("Width").SelectedValue.ToLower() == "stretch";
	bool hasSpacingBetweenRows = Model.Item.GetList("SpaceBetweenRows").SelectedValue.ToLower() != "none";
	bool hasSpacingBetweenColumns = Model.Item.GetList("SpaceBetweenColumns").SelectedValue.ToLower() != "stick";
	string rowWidth = newsletterWidth + "px";
	string columnWidth = hasSpacingBetweenColumns ? (newsletterWidth - 20) / 2 + "px" : newsletterWidth / 2 + "px";
	int yMargin = hasSpacingBetweenRows ? 20 : 0;
}

<div style="@(isStretchRow ? backgroundStyle : "")">
	<div class="layout two-col has-gutter stack" style="margin: 0 auto @(yMargin)px auto;max-width:@rowWidth;min-width: 320px; width: 320px;width: calc(28000% - 167400px);overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;">
		<div class="layout__inner" style="@(!isStretchRow ? backgroundStyle : "")border-collapse: collapse;display: table;width: 100%;">
			<!--[if (mso)|(IE)]>
				<table align="center" cellpadding="0" cellspacing="0" role="presentation">
				<tr>
				<td style="width: @columnWidth" valign="top" class="w250">
			<![endif]-->
			<div class="column" style="max-width: 320px;min-width: @columnWidth; width: 320px;width: calc(18290px - 3000%);Float: left;">
				<table style="border-collapse: collapse;table-layout: fixed;height: 100%" cellpadding="0" cellspacing="0" width="100%" role="presentation">
					<tbody>
					<tr>
						@Model.Column(1).Output()
					</tr>
					</tbody>
				</table>
			</div>
			<!--[if (mso)|(IE)]>
				</td>
			<![endif]-->

			@if (hasSpacingBetweenColumns)
			{
				<!--[if (mso)|(IE)]>
					<td style="width: 20px">
				<![endif]-->
				<div class="gutter" style="Float: left;width: 20px;">&nbsp;</div>
				<!--[if (mso)|(IE)]>
					</td>
				<![endif]-->
			}

			<!--[if (mso)|(IE)]>
				<td style="width: @columnWidth" valign="top" class="w250">
			<![endif]-->
			<div class="column" style="max-width: 320px;min-width: @columnWidth; width: 320px;width: calc(18290px - 3000%);Float: left;">
				<table style="border-collapse: collapse;table-layout: fixed;height: 100%" cellpadding="0" cellspacing="0" width="100%" role="presentation">
					<tbody>
					<tr>
						@Model.Column(2).Output()
					</tr>
					</tbody>
				</table>
			</div>
			<!--[if (mso)|(IE)]>
				</td>
				</tr>
				</table>
			<![endif]-->
		</div>
	</div>
</div>
@if (hasSpacingBetweenRows)
{
	<!--[if (mso)]>
		<div class="layout one-col fixed-width stack">
			<table align="center" cellpadding="0" cellspacing="0" role="presentation">
				<tr class="layout-fixed-width">
					<td>
						<div class="column" style="line-height: 21px;">
							<div style="mso-line-height-rule: exactly;line-height: 20px;font-size: 1px;">&nbsp;</div>
						</div>
					</td>
				</tr>
			</table>
		</div>
	<![endif]-->
}
