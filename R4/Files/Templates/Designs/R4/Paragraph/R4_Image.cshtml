@inherits Dynamicweb.Rendering.ViewModelTemplate<Dynamicweb.Frontend.ParagraphViewModel>
@using Dynamicweb.Frontend

@{
	string ratio = Model.Item?.GetList("ImageAspectRatio")?.SelectedValue != "0" && Model.Item?.GetList("ImageAspectRatio")?.SelectedValue != "" ? Model.Item.GetList("ImageAspectRatio").SelectedValue : "";
	string ratioCssClass = ratio != "" && ratio != "fill" ? "ratio" : "";
	string ratioVariable = ratio != "" ? "style=\"--bs-aspect-ratio: " + Model.Item.GetList("ImageAspectRatio").SelectedValue + "\"" : "";
	string fillClass = ratio == "fill" ? "h-100" : "";
}

<figure class="m-0 @ratioCssClass @fillClass" @ratioVariable>
	@if (Model.Item.GetString("Image") != null)
	{
		string imagePath = Model.Item?.GetFile("Image")?.Path ?? "";
		imagePath = "/Admin/Public/GetImage.ashx?width=" + 1920 + "&height=" + 845 + "&image=" + imagePath + "&Format=WebP&Quality=100";

		int xPos = Model.Item?.GetFile("Image")?.FocalPositionFromLeft ?? 50;
		int yPos = Model.Item?.GetFile("Image")?.FocalPositionFromTop ?? 50;

		<img loading="lazy" src="@imagePath" class="w-100 @fillClass" style="object-fit: cover; object-position: @(xPos)% @(yPos)%" title="@Model.Item.GetString("Title")" alt="@Model.Item.GetString("Title")" />
	}
</figure>
