@inherits Dynamicweb.Rendering.RazorTemplateBase<Dynamicweb.Rendering.RazorTemplateModel<Dynamicweb.Rendering.Template>>
@using Dynamicweb
@using Dynamicweb.Frontend
@using Dynamicweb.Extensibility
@using Dynamicweb.Content
@using Dynamicweb.Core
@using Dynamicweb.Ecommerce.Orders
@using Dynamicweb.Ecommerce.Orders.SalesDiscounts
@using System
@using System.Web
@using System.IO

@{
	string iconPath = "/Files/Icons/";
	string pageId = GetGlobalValue("Global:Page.ID");
	int currentUserId = Dynamicweb.Core.Converter.ToInt32(GetGlobalValue("Global:Extranet.UserID"));
}

<div class="row">
	<div class="col-lg-8 py-3 py-lg-5 pe-lg-5 order-last order-lg-first">
		<form name="ordersubmit" id="ordersubmit" method="post" autocomplete="off">

			@RenderLogo()

			@RenderPageHeader()

			@RenderStepsBreadcrumbs()

			@RenderErrorMessages()

			@RenderCustomerSummary()
			
			@* If user not logged in *@
			@if(currentUserId == 0)
			{
				@RenderAddressAnonymousUsers()
			} 
			else {	
				@RenderAddressLoggedInUsers()
			}

			@RenderStepsNavigation(iconPath)
		</form>
	</div>

	<div class="summary-sidebar col-lg-4 position-relative py-2 py-lg-5 ps-lg-5 border-start">
		<div class="position-relative">

			@RenderToggleOrderSummaryButton()
			@RenderSidebar()

		</div>
	</div>
</div>

@helper RenderPageHeader() {
	<div class="pb-3 pb-md-4">
		<h1 class="h3 mb-2">@Translate("Address")</h1>
		<p class="mb-0">@Translate("Please fill in your address")</p>
	</div>
}

@Include("Helpers/Logo.cshtml")
@Include("Helpers/StepsNavigation.cshtml")
@Include("Helpers/StepsBreadcrumbs.cshtml")
@Include("Helpers/Errors.cshtml")
@Include("Helpers/CustomerSummary.cshtml")
@Include("Helpers/Sidebar.cshtml")
@Include("Helpers/ToggleOrderSummaryButton.cshtml")
@Include("Helpers/AddressLoggedInUsers.cshtml")
@Include("Helpers/AddressAnonymousUsers.cshtml")
