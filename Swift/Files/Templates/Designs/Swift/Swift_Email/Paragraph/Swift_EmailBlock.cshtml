@inherits Dynamicweb.Rendering.ViewModelTemplate<Dynamicweb.Frontend.ParagraphViewModel>

@{
	var blockId = Model.ID;
	var blockType = Model.ItemType;
	var block = Model.Item;
	var selectedTheme = block.GetRawValueString("Theme", "0");
	var themeParagraph = selectedTheme != "0" ? Dynamicweb.Services.Paragraphs.GetParagraph(Convert.ToInt32(selectedTheme)) : null;
	var theme = Dynamicweb.Frontend.ContentViewModelFactory.CreateParagraphInfoViewModel(themeParagraph)?.Item ?? null;
}

<table id="@blockId" align="center" border="0" cellpadding="0" cellspacing="0" class="row-content stack row-@blockType" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; color: inherit; width: 100%;">
	<tbody>
		<tr>
			<td class="column" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; vertical-align: top; padding:0px; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px;" width="100%">
				
				<div class="theme @theme.GetString("CSSClassName").ToLower()" style="background-color: @theme.GetString("BackgroundColor", ""); color: @theme.GetString("ForegroundColor");">
					@*@theme.ToJson()*@
					@theme.GetString("BackgroundColor")
					@theme.GetString("ForegroundColor")
					@theme.GetString("ButtonPrimaryForegroundColor")
					@theme.GetString("ButtonPrimaryBackgroundColor")

					@RenderText()
					@RenderButton(theme)

				</div>
			</td>
		</tr>
	</tbody>
</table>

@helper RenderText()
{
	string text = Model.Item.GetString("Title", string.Empty);

	<div class="mt-0 mb-0" style="mso-line-height-rule: exactly;mso-text-raise: 11px;vertical-align: middle;">
		@text
	</div>
}

@helper RenderButton(Dynamicweb.Frontend.ItemViewModel theme)
{
	<style>
		.theme.@theme.GetString("CSSClassName").ToLower() .btn-primary a:hover {
			background-color: @theme.GetColor("ButtonPrimaryBackgroundColor").Darken(10) !important;
			border-color: @theme.GetColor("ButtonPrimaryBackgroundColor").Darken(10) !important;
		}

		.theme.@theme.GetString("CSSClassName").ToLower() .btn-primary table td:hover {
			background-color: transparent !important;
		}
	</style>
	<div>
		Background: @theme.GetString("ButtonPrimaryBackgroundColor")
		Foreground: @theme.GetString("ButtonPrimaryForegroundColor")
		Darken: @theme.GetColor("ButtonPrimaryBackgroundColor").Darken(10)
		<div class="btn-primary">
			<a href="#" class="btn-primary">Hej</a>
		</div>
	</div>

	<table border="0" cellpadding="0" cellspacing="0" class="btn btn-primary" style="border-collapse: separate; mso-table-lspace: 0pt; mso-table-rspace: 0pt; width: 100%; box-sizing: border-box; min-width: 100% !important;" width="100%">
		<tbody>
			<tr>
				<td align="center" style="font-family: Helvetica, sans-serif; font-size: 14px; vertical-align: top;" valign="top">
					<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: separate; mso-table-lspace: 0pt; mso-table-rspace: 0pt; width: auto;">
						<tbody>
							<tr>
								<td style="font-family: Helvetica, sans-serif; font-size: 14px; vertical-align: top; background-color: @theme.GetString("ButtonPrimaryBackgroundColor"); border-radius: 4px; text-align: center;" valign="top" bgcolor="@theme.GetString("ButtonPrimaryBackgroundColor")" align="center">
									<a href="http://htmlemail.io" target="_blank" style="display: inline-block; color: @theme.GetString("ButtonPrimaryForegroundColor"); background-color: @theme.GetString("ButtonPrimaryBackgroundColor"); border: solid 2px @theme.GetString("ButtonPrimaryBorderColor"); border-radius: 4px; box-sizing: border-box; cursor: pointer; text-decoration: none; font-size: 14px; font-weight: bold; margin: 0; padding: 12px 24px; text-transform: capitalize; border-color:@theme.GetString("ButtonPrimaryBorderColor");">More Info</a>
								</td>
							</tr>
						</tbody>
					</table>
				</td>
			</tr>
		</tbody>
	</table>
}
