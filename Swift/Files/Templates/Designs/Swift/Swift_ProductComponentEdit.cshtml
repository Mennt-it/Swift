@inherits Dynamicweb.Rendering.ViewModelTemplate<Dynamicweb.Frontend.PageViewModel>
@using System
@using Dynamicweb.Ecommerce.ProductCatalog
@MasterPageFile("Swift_MasterNoLayout.cshtml")

@{ 
	bool isVisualEditor = !string.IsNullOrEmpty(Dynamicweb.Context.Current.Request.QueryString.Get("VisualEdit")) ? Convert.ToBoolean(Dynamicweb.Context.Current.Request.QueryString.Get("VisualEdit")) : false;
	string theme = "";
	string gridContent = "";

	if (Model.PropertyItem != null)
	{
		theme = !string.IsNullOrWhiteSpace(Model.Item.GetRawValueString("ListItemTheme")) ? " theme " + Model.Item.GetRawValueString("ListItemTheme").Replace(" ", "").Trim().ToLower() : "theme light";
	}

	if (Model.Item != null)
	{
		gridContent = Model.Grid("Grid", "Grid", "default:true;sort:1", "Page");
	}

	string viewType = Model.Item.GetRawValueString("ViewType", "3-columns");

	<div class="bg-light w-100 position-relative vh-100">
		<div class="p-5 position-fixed" style="z-index: 10">
			<h3 class="h5">@Translate("Component builder")</h3>
		</div>
		<div class="container-xl d-flex flex-row align-items-center justify-content-center h-100 position-relative">
			<div class="grid w-100">
				@if (viewType == "list")
				{
					<div class="g-col-12 shadow @theme p-2">
						@gridContent
					</div>
				}
				@if (viewType == "2-columns")
				{
					<div class="g-col-6 shadow @theme p-2">
						@gridContent
					</div>
					<div class="g-col-6 bg-black" style="opacity: 10%"></div>
				}
				@if (viewType == "3-columns")
				{
					<div class="g-col-4 shadow @theme p-2">
						@gridContent
					</div>
					<div class="g-col-4 bg-black" style="opacity: 10%"></div>
					<div class="g-col-4 bg-black" style="opacity: 10%"></div>
				}
				@if (viewType == "4-columns")
				{
					<div class="g-col-3 shadow @theme p-2">
						@gridContent
					</div>
					<div class="g-col-3 bg-black" style="opacity: 10%"></div>
					<div class="g-col-3 bg-black" style="opacity: 10%"></div>
					<div class="g-col-3 bg-black" style="opacity: 10%"></div>
				}
			</div>
		</div>
	</div>
}

<script>
	document.querySelector('#VisualEditoForcedTopHeight').style.height = 0;
</script>
