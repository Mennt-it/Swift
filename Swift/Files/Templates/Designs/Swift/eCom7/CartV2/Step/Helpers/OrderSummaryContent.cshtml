@helper RenderOrderSummaryContent() {
	int totalProducts = 0;

	<div class="d-lg-block h-lg-auto visible-lg-visible pb-2 pb-md-0 collapse" id="orderSummary">
		<div class="d-flex flex-column gap-3 position-relative" id="orderSummaryList" style="overflow-x: hidden; overflow-y: hidden;">
			@foreach (LoopItem orderline in GetLoop("OrderLines")) {
				@RenderOrderSummaryOrderLineItem(orderline)

				if (orderline.GetBoolean("Ecom:Order:OrderLine.IsProduct")) {
					totalProducts++;
				}
			}
			<div class="btn btn-primary position-absolute bottom-0 mb-3 btn-sm" style="width: auto; left: 50%; transform: translateX(-50%);" id="scrollToViewMoreButton">@Translate("Scroll to view more")</div>
		</div>
		
		@RenderOrderSummary()
	</div>

	<script>
		var summaryFooterHeight = document.querySelector("#orderSummaryFooter").offsetHeight + 100;
		document.querySelector("#orderSummaryList").style.maxHeight = "calc(100vh - " + summaryFooterHeight + "px)";

		document.querySelector("#orderSummaryList").addEventListener("scroll", function (event) {
			var moreButton = document.querySelector('#scrollToViewMoreButton');
			moreButton.classList.add("d-none");
		});

		document.querySelector("#summarySidebar").addEventListener("mouseover", function (event) {
			var orderSummary = document.querySelector('#orderSummaryList');
			orderSummary.style.overflowY = "auto";
		});
		document.querySelector("#summarySidebar").addEventListener("mouseout", function (event) {
			var orderSummary = document.querySelector('#orderSummaryList');
			orderSummary.style.overflowY = "hidden";
		});
	</script>
}

@Include("OrderSummaryOrderLineItem.cshtml")
@Include("OrderSummary.cshtml")
