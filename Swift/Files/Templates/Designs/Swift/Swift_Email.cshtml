@inherits Dynamicweb.Rendering.ViewModelTemplate<Dynamicweb.Frontend.PageViewModel>
@MasterPageFile("Swift_EmailBase.cshtml")

@if(this.Pageview is object)
{
	var page = Dynamicweb.Services.Pages.GetPage(Model.ID);
	var settings = Dynamicweb.Frontend.ContentViewModelFactory.CreatePageInfoViewModel(page?.Parent).Item;
	bool isEmail = Model.ItemType == "Swift_Email";

	if(settings is object)
    {
		int header = settings?.GetLink("Header").PageId ?? 0;
		int footer = settings?.GetLink("Footer").PageId ?? 0;

		if (isEmail)
		{
			<span class="preheader" style="color:transparent;display:none;height:0;max-height:0;max-width:0;opacity:0;overflow:hidden;mso-hide:all;visibility:hidden;width:0;">{{EmailMarketing:Email.PreHeader.Clean}}</span>
		}

		if (isEmail && header != 0)
		{
			<!-- START HEADER -->
			@RenderGrid(header)
			<!-- END HEADER -->
		}

		@Model.Grid("Grid", "Email Grid", "default:true;sort:1", "Email")

		if (isEmail && footer != 0)
		{
			<!-- START FOOTER -->
			@RenderGrid(footer)
			<!-- END FOOTER -->
		}
    }
}
